<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>（株）よつや外商部 日本酒検索アプリ</title>

  <!-- ライブラリの読み込み -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <!-- CSSのリンク -->
  <link rel="stylesheet" href="css/style.css">
</head>

<body>
  <header class="app-header">
    <div class="header-content">
      <h1>（株）よつや外商部<br><span class="subtitle">日本酒検索アプリ</span></h1>
    </div>
  </header>

  <div class="search-section">
    <div class="search-grid">
      <!-- ① 産地で検索 -->
      <div class="search-card">
        <div class="search-icon">📍</div>
        <label>産地で検索</label>
        <div class="input-wrapper" style="display: flex; gap: 5px;">
          <select id="search-region" style="flex: 1;">
            <option value="">地方を選択</option>
          </select>
          <select id="search-prefecture" style="flex: 1;">
            <option value="">県名を選択</option>
          </select>
        </div>
      </div>

      <!-- ② JANコードで検索 -->
      <div class="search-card">
        <div class="search-icon">🏷️</div>
        <label for="search-jan">JANコードで検索</label>
        <div class="input-wrapper">
          <input type="text" id="search-jan" placeholder="例: 49..." inputmode="numeric">
        </div>
      </div>

      <!-- ③ 商品名で検索 -->
      <div class="search-card">
        <div class="search-icon">🍶</div>
        <label for="search-name">商品名で検索</label>
        <div class="input-wrapper">
          <input type="text" id="search-name" placeholder="例: 純米大吟醸...">
        </div>
      </div>

      <!-- ④ 蔵元名で検索 -->
      <div class="search-card">
        <div class="search-icon">🏭</div>
        <label for="search-brewery">蔵元名で検索</label>
        <div class="input-wrapper">
          <input type="text" id="search-brewery" placeholder="例: よつや酒造...">
        </div>
      </div>
    </div>

    <div class="search-advanced">
      <div class="search-group price-group">
        <label>価格帯 (税抜)</label>
        <div class="price-inputs">
          <input type="number" id="search-price-min" placeholder="下限" min="0" step="100">
          <span>〜</span>
          <input type="number" id="search-price-max" placeholder="上限" min="0" step="100">
        </div>
      </div>
    </div>
  </div>
  <div class="card-container" id="card-container"></div>

  <div class="floating-button-container">
    <button class="floating-button" onclick="checkAll()">全てにチェックする</button>
    <button class="floating-button" onclick="uncheckAll()">全てのチェックを外す</button>
    <button class="floating-button" onclick="generatePDF()">選択商品の見積PDF出力</button>
    <button class="floating-button" onclick="generateFullListPDF()">全てのリストを印刷する</button>
  </div>

  <!-- プレビューモーダル -->
  <footer
    style="margin-top: 50px; padding: 20px; text-align: center; border-top: 1px solid #eee; color: #888; font-size: 0.8rem;">
    <p>&copy; Yotsuya Gaisho Dept.</p>
    <a href="admin.html" style="color: #ccc; text-decoration: none;">管理画面へ</a>
  </footer>

  <!-- プレビューモーダル -->
  <div id="preview-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>プレビューを作成中</h2>
        <button class="btn btn-secondary" onclick="closePreview()">✕</button>
      </div>
      <div class="modal-settings" style="flex-direction: column; align-items: stretch; gap: 10px;">
        <div style="display: flex; align-items: center; gap: 1rem;">
          <label for="addressee-input" style="width: 40px;">宛名:</label>
          <input type="text" id="addressee-input" placeholder="会社名・お名前 (例：〇〇株式会社)" style="flex-grow: 1;">
          <span>御中</span>
        </div>
        <div style="display: flex; align-items: flex-start; gap: 1rem;">
          <label for="comment-input" style="width: 40px; padding-top: 8px;">備考:</label>
          <textarea id="comment-input" maxlength="100" placeholder="備考コメント (100文字まで)"
            style="flex-grow: 1; padding: 0.5rem; border: 1px solid #d1d5db; border-radius: 6px; font-size: 1rem; resize: vertical; min-height: 40px; font-family: inherit;"></textarea>
        </div>
      </div>
      <div class="modal-body" id="preview-content">
        <!-- ここにプレビューページが生成されます -->
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" onclick="closePreview()">キャンセル</button>
        <button class="btn btn-primary" onclick="downloadPDF()">PDFをダウンロード</button>
      </div>
    </div>
  </div>

  <div id="estimate-capture"></div>

  <!-- JavaScriptのリンク -->
  <script src="js/data.js"></script>
  <script src="js/main.js?v=2"></script>
</body>

</html>